---
title:  "(TIL) Redis 입문 - 설치부터 캐싱 사용 전략까지"
excerpt: "Redis란?
: 데이터 처리 속도가 엄청 빠른 NoSQL 데이터베이스
- NoSQL 데이터베이스: Key-Value의 형태로 데이터를 저장하는 데이터베이스"

categories:
  - TIL
tags:
  - [TIL, 내일배움캠프, 스파르타내일배움캠프, AI, 파이썬, 리눅스, 우분투, NoSQL, Redis, 캐시, 캐싱]

toc: true

last_modified_at: 2024-12-13
thumbnail: ../images/2024-12-04-11-03-02.png
---
![](/images/../images/2024-12-04-11-03-02.png)


본 게시글은 아래 유튜브 강의를 바탕으로 Redis를 공부하며 정리한 내용입니다.   
※ [[인프런] 비전공자도 이해할 수 있는 Redis 입문/실전](https://youtube.com/playlist?list=PLtUgHNmvcs6qoVrxB5jzZ4meINz_KL-Bl&si=rRqoe6fV7chgMz1q)

# Redis
## Redis란?
: 데이터 처리 속도가 엄청 빠른 NoSQL 데이터베이스
- NoSQL 데이터베이스: Key-Value의 형태로 데이터를 저장하는 데이터베이스

## Redis의 장점
여러 가지 장점 중 가장 중요한 한 가지는,
바로 데이터의 처리 성능이 굉장이 빠르다는 것!

그 이유는 디스크(Disk)에 데이터를 저장하는 MySQL 등의 RDBMS 데이터베이스와 달리, Redis는 메모리(RAM)에 데이터를 저장하기 때문이다.   
💡데이터 처리 속도: 디스크 <<<< 메모리(훨씬 Fast!)

## Redis 사용 사례
- **캐싱 (Caching)**
    - Cache: 나중에 요청될 결과를 미리 저장해두었다가 적시에 빠르게 서비스해주는 것 -> **데이터 조회 성능 향상**
- 세션 관리
- 실시간 분석 및 통계
- 메시지 큐
- 지리공간 인덱싱
- 속도 제한
- 실시간 채팅 및 메시징

다른 사례는 Redis에 익숙해진 다음 자세히 알아보도록 하고, 지금은 캐싱 사례를 공부하고 구현하며 Redis를 이해해보자.

## Windows에서 Redis 설치
Redis를 설치하려면 WSL(Windows Subsystem for Linux) 환경에서 Ubuntu를 설치한 뒤 진행하는 것이 일반적이다. Windows에서도 Redis 실행하는 방법도 있다고 하지만, 장기적인 개발 및 학습을 위해 WSL 환경에서 Ubuntu를 설치하는 것을 추천한다.   
(1)WSL 설치 → (2)리눅스 배포판(예: Ubuntu) 설치 → (3)그 위에 Redis 설치   

💡리눅스: Window, MAC과 같은 운영체제(Operation System). 
UNIX라는 운영 체제에서 영향을 받아 개발된 운영 체제인데, 하드웨어에 종속적인 UNIX를 쓰기 위해선 매우 비싼 장비를 사용해야한다. 그래서 "장비에 종속 없이 인텔 기반의 윈도우 PC에서도 깔아서 슬 수 있게 하자"가 리눅스의 시작이 된 것이다.
💡우분투: 리눅스는 오픈소스이기 떄문에 수정 배포가 자유롭다. 우분투는 이처럼 리눅스를 수정해서 배포한 종류 중 하나. 즉, 리눅스 배포판!   
참고자료 - [[Linux/Ubuntu] 리눅스와 우분투는 무엇일까?](https://sseozytank.tistory.com/76)

`redis-cli`: Redis CLI 실행 
-> 우분투 명령창??에 redis-cli를 실행시켜보자. 무슨 경로??같은게 바뀌는 걸 볼 수 있다. 이후 ping을 입력하여서 PONG이 출력되면 redis가 잘 실행된다는 뜻이다.

## Redis 기본 명령어
레디스로 조회 성능을 개선하는 데 알아두어야 할 핵심 명령어 7가지만 익히자.  다른 명령어들은 나중에 레디스를 쓰면서 필요한 기능이 더 생겼을 때 직접 찾으며 배우면 된다.

1. 데이터 키-값 저장
```bash
set key value
```

2. 데이터 조회
```bash
get key
```

3. 저장된 모든 key 조회
```bash
keys *
```

4. 데이터 삭제
```bash
del key
```
삭제 성공 시 `(integer) 1`, 실패 시 `(integer) 0` 출력.   
또한, 삭제 후 사라진 데이터를 다시 조회(get)하면 `(nil)`이라는 결과가 뜬다.

5. 데이터 저장 시 만료시간(TTL; Time to Live) 설정
```bash
set key value ex <seconds>
```
레디스는 RDBMS 같은 디스크보다 용량이 작다. 그래서 자주 쓰는 것만 저장해놓고 그렇지 않은 건 삭제할 수 있도록 하는 TTL라는 기능이 있다.
예시: `set marcia:pet dog ex 30` → 30초 후 데이터 자동 삭제

6. 만료시간 얼마나 남았는 지 확인 (잔여시간 확인)
```bash
ttl key
```
    - 키가 없는 경우엔 `-2`가 반환된다. 실제로 ttl이 지난 후(즉 시간이 만료된 후)에 확인했을 때에도 키가 삭제된 것이기에 `-2`가 반환된다.
    - 키값이 있지만 만료시간(ttl)이 설정되지 않은 경우엔 `-1`이 반환된다.

7. 모든 데이터 삭제
```bash
flushall
```

## Key 네이밍 컨벤션
프로그래밍 언어가 으레 그렇듯, 현업에서 자주 사용하는 Key 네이밍 컨벤션이 있다.   
Redis에서 Key를 정의할 때는 **콜론(:)**을 이용해 **계층적으로** 의미를 구분해서 사용한다.

예시:
- `jaesung:hobby`
- `users:100:name` : users 중에서 PK가 100인 사용자(user)의 이름. (= 100번 사용자의 이름)

이렇게 해서 가독성, 일관성, 검색 및 필터링 용이성, 확장성을 높인다.

## 캐시(Cache)
캐시: 원본 저장소보다 빠르게 가져올 수 있는 **임시** 데이터 저장소

## 캐싱(Caching)
캐싱: **캐시(Cache)에 접근**해서 데이터를 빠르게 가져오는 방식

"이 API는 응답 속도가 너무 느리다. 이 응답 결과는 캐싱해두고 쓰자" == "이 API는 응답 속도가 너무 느리다. 이 응답 결과를 원본 저장소 대신 임시데이터 저장소에 저장해두고, 빠르게 조회할 수 있게 만들자

## 데이터 캐싱 시 사용 전략
캐싱할 때 사용하는 전략은 다양하나, 여기서는 현업에서 가장 많이 사용되는 두 가지의 전략을 살펴본다.

### 1. Cache Aside (= Look Aside, Lazy Loading) 전략
- Cache Aside 전략: 먼저 **캐시**에서 데이터를 확인하고, 없다면 DB를 통해 조회해오는 방식
- 데이터를 어떻게 **조회**할 지에 대한 전략!
(1) 캐시에 데이터가 있을 경우(Cache Hit)
![](/images/../images/Cache%20Hit.png)
(2) 캐시에 데이터가 없을 경우(Cache Miss)
![](/images/../images/Cache%20Miss.png)

### 2. Write Around 전략
- Write Around 전략: 데이터를 저장할 때 레디스에 저장하지 않고 **데이터베이스**에만 저장하는 방식. 그러다 데이터 조회시 레디스에 데이터가 없으면 데이터베이스로부터 데이터를 조회해와서 레디스에 저장시켜주는 방식 => 쓰기 작업(저장, 수정, 삭제)을 캐시에는 반영하지 않고 DB에만 반영하는 방식
- 데이터를 어떻게 **쓸** 지(**저장, 수정, 삭제**)에 대한 전략!